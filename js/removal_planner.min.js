google.load("jquery","1.6.2");google.load("jqueryui","1.8.14");if(!window.UMZUGSPLANER){var UMZUGSPLANER={}}UMZUGSPLANER.compute=(function(){var b,m,g,c=24*60*60*1000,k=7*24*60*60*1000,e=["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"];function f(){var q=(Math.round((m.getTime())/1000)),p="http://pdf.umzugskalender.de/umzugsplaner/generatePDF/generate_pdf_small_font.php?currentTab="+b+"&removal_date="+q+"&removal_type="+g;window.open(p)}function h(u,r,s){var w,q,p,v,y,x,t=$(u).find('removalTipItem[type="'+s+'"][order="'+r+'"]');if(t.size()<1){t=$(u).find('removalTipItem[type="common"][order="'+r+'"]')}w='<div class="tip_body">';q=t.find("headline").text();w+='<h3 class="headline">'+q+"</h3>";p=t.find("text");v=t.find("list");if(p.size()>=1){w+='<p class="text">'+p.text()+"</p>"}if(v.size()>=1){w+='<ul class="list">';y=v.find("listItem");y.each(function(){w+='<li class="list_item">'+$(this).text()+"</li>"});w+="</ul>"}w+="</div>";x=t.find("link");if(x.size()>=1){w+='<div class="link_list">';x.each(function(){var z=$(this);w+='<a class="'+z.attr("type")+'"href="'+z.attr("href")+'" target="_blank">'+z.text()+"</a>"});w+="</div>"}return w}function o(t){var q,p,s,r;if(t.getTime()<new Date().getTime()-c){q='<p class="late_day">baldm&#246;glichst</p>'}else{p=t.getDate();s=Number(t.getMonth())+1;r=(p>9?p:"0"+p)+"."+(s>9?s:"0"+s)+"."+t.getFullYear();q='<p class="day">'+e[t.getDay()]+"</p><p>"+r+"</p>"}return q}function l(t){g=$('input:radio[name="removal_type"]:checked').val();m=$("#datepicker").datepicker("getDate");var v=$(t).find('removalTipItem[type="common"]'),q=$(t).find('removalTipItem[type="'+g+'"]'),p=[],s=[],A,z,B=-1,y=-1,x=-1,J=[],I=[],H=[],G=[],D;for(D=-1,z=q.length;++D<z;){p[D]=Number($(q[D]).attr("order"))}for(D=-1,z=v.length;++D<z;){s[D]=Number($(v[D]).attr("order"))}A=p.concat(s);A.sort(function(L,K){return L-K});for(D=-1,z=A.length;++D<z;){var C=A[D],u=new Date(m.getTime()+C*c),r=new Date(m.getTime()+k),w=h(t,C,g),F=o(u),E=$("li.ui-tabs-selected a").attr("href");J[D]='<div class="tip_holder"><div class="time">'+F+'</div><div class="tip">'+w+"</div></div>";if(u<m){++B;I[B]=J[D]}if(u>=m&&u<=r){++y;H[y]=J[D]}if(u>r){++x;G[x]=J[D]}}$(".scroll-pane .tips").html("");$("#tab1 .scroll-pane .tips").append(J.join(""));$("#tab2 .scroll-pane .tips").append(I.join(""));$("#tab3 .scroll-pane .tips").append(H.join(""));$("#tab4 .scroll-pane .tips").append(G.join(""));$("#plan_result").fadeIn("slow");window.setTimeout(function(K){$(".loading_animation").hide();$(".tab_content").fadeIn("slow");if($("li.ui-tabs-selected a").attr("href")!==undefined){$(K+" .scroll-pane").jScrollPane()}},1000)}function d(){$("#tabs").tabs({show:function(p,q){b=q.panel.id;$("#"+q.panel.id+" .scroll-pane").jScrollPane()}})}function a(){$.ajax({type:"GET",url:"removalTips.xml",dataType:"xml",async:true,success:function(p){l(p);d()},error:function(r,p,q){alert("Die Tips konnten leider nicht geladen werden Versuchen Sie es bitte sp&#228;ter nochmal.")}})}function j(){$.datepicker.regional.de={monthNames:["Januar","Februar","M&#228;rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:e,dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"Wo",dateFormat:"dd.mm.yy",firstDay:1,showMonthAfterYear:true,showAnim:"fold",beforeShow:function(p,q){q.dpDiv.css({marginTop:(-p.offsetHeight-2)+"px"})}};$.datepicker.setDefaults($.datepicker.regional.de);$("#datepicker").datepicker();$("#datepicker").datepicker("setDate",new Date());a()}function i(){$("#rem_plann_form .submit").click(function(p){p.preventDefault();$("#start_layer").hide("slow");$(".tab_content").hide("slow");$(".loading_animation").show();a()});$("#form_label").click(function(){$("#datepicker").datepicker("show")});$(".pdf_export").click(function(){f()})}function n(){j();i()}return{init:function(){return n()}}}());google.setOnLoadCallback(UMZUGSPLANER.compute.init);